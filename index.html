<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Castastics Battle</title>
    <style>
        /* Base Styles */
        body { margin: 0; background: #000; color: white; font-family: sans-serif; overflow: hidden; }
        .screen { display: none; width: 100vw; height: 100vh; flex-direction: column; align-items: center; justify-content: center; }
        .active { display: flex; }

        /* The Magical Forest Background */
        #arena { 
            width: 100%; height: 320px; position: relative; overflow: hidden;
            background: #16213e; /* Solid color fallback */
            background: linear-gradient(#2d1b4e, #16213e, #0f3460);
            border-bottom: 6px solid #2d5a27; display: flex; justify-content: space-around; align-items: flex-end;
        }

        /* Sprite Setup */
        .sprite { 
            width: 130px; height: 130px; 
            background-size: contain; background-repeat: no-repeat; background-position: bottom;
            transition: transform 0.3s; z-index: 5;
            filter: drop-shadow(0 0 5px rgba(0,212,255,0.5));
        }

        /* UI Elements */
        .hp-bar { width: 90%; height: 12px; background: #333; border-radius: 6px; margin: 5px; overflow: hidden; border: 1px solid #555; }
        .hp-fill { height: 100%; width: 100%; transition: width 0.3s ease; }
        .btn { background: #1a1a2e; border: 2px solid #00d4ff; color: white; padding: 18px; margin: 6px; width: 85%; border-radius: 15px; font-weight: bold; font-size: 16px; }
        #log { font-style: italic; color: #00d4ff; margin: 10px; height: 20px; }
    </style>
</head>
<body>

<div id="menu" class="screen active">
    <h1 style="color:#00d4ff; text-shadow: 0 0 10px #00d4ff;">CASTASTICS</h1>
    <p>Select a Level</p>
    <div id="lvl-list" style="width:100%; display: flex; flex-direction: column; align-items: center;"></div>
</div>

<div id="battle" class="screen">
    <div id="b-name" style="color:#ff4d4d">BOSS</div>
    <div class="hp-bar"><div id="b-hp" class="hp-fill" style="background:#ff4d4d"></div></div>
    
    <div id="arena">
        <div id="h-img" class="sprite"></div>
        <div id="b-img" class="sprite"></div>
    </div>
    
    <div id="h-name" style="color:#00d4ff">HERO</div>
    <div class="hp-bar"><div id="h-hp" class="hp-fill" style="background:#00d4ff"></div></div>
    
    <p id="log">Awaiting command...</p>
    <button class="btn" onclick="act(15)">ATTACK</button>
    <button class="btn" onclick="act(35)" style="color:gold; border-color:gold;">ULTIMATE SKILL</button>
</div>

<script>
// Data matching your GitHub file list exactly
const levels = [
    {h:"Woody", b:"Mr. FruitÃ³", hI:"woody.png", bI:"fruito.png", hp:100},
    {h:"James", b:"Radio", hI:"james.png", bI:"radio.png", hp:150},
    {h:"Ezekiel", b:"Dark Vogue", hI:"ezekiel.png", bI:"vogue.png", hp:200},
    {h:"Boxlunch", b:"Godzilla", hI:"boxlunch.png", bI:"godzilla.png", hp:500},
    {h:"Kenny", b:"Carrot", hI:"kenny.png", bI:"carrot.png", hp:300},
    {h:"The Artist", b:"Covered", hI:"artist.png", bI:"covered.png", hp:350},
    {h:"Frank", b:"Bookster", hI:"frank.png", bI:"bookster.png", hp:400}
];

let cur, pHp, bHp, busy = false;

// Create Menu
const list = document.getElementById('lvl-list');
levels.forEach(l => {
    const b = document.createElement('button');
    b.className = 'btn';
    b.innerText = l.h + " VS " + l.b;
    b.onclick = () => {
        cur = l; pHp = 100; bHp = 100;
        document.getElementById('h-name').innerText = l.h.toUpperCase();
        document.getElementById('b-name').innerText = l.b.toUpperCase();
        document.getElementById('h-img').style.backgroundImage = "url('" + l.hI + "')";
        document.getElementById('b-img').style.backgroundImage = "url('" + l.bI + "')";
        document.getElementById('menu').classList.remove('active');
        document.getElementById('battle').classList.add('active');
        document.getElementById('log').innerText = "Battle Start!";
    };
    list.appendChild(b);
});

async function act(dmg) {
    if(busy) return; busy = true;
    
    // Player hits Boss
    bHp -= (dmg / cur.hp * 100);
    document.getElementById('log').innerText = cur.h + " attacks!";
    document.getElementById('h-img').style.transform = "translateX(50px) scale(1.2)";
    await new Promise(r => setTimeout(r, 400));
    document.getElementById('h-img').style.transform = "translateX(0)";
    document.getElementById('b-hp').style.width = Math.max(0, bHp) + "%";
    
    if(bHp <= 0) {
        document.getElementById('log').innerText = "VICTORY!";
        setTimeout(() => location.reload(), 2000);
        return;
    }

    // Boss counter
    document.getElementById('log').innerText = cur.b + " counters!";
    await new Promise(r => setTimeout(r, 800));
    pHp -= 20;
    document.getElementById('b-img').style.transform = "translateX(-50px) scale(1.2)";
    await new Promise(r => setTimeout(r, 400));
    document.getElementById('b-img').style.transform = "translateX(0)";
    document.getElementById('h-hp').style.width = Math.max(0, pHp) + "%";
    
    if(pHp <= 0) {
        document.getElementById('log').innerText = "DEFEAT...";
        setTimeout(() => location.reload(), 2000);
    } else {
        busy = false;
        document.getElementById('log').innerText = "Your turn!";
    }
}
</script>
</body>
</html>
